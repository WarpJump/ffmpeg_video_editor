# Video Editor

Локальный веб-интерфейс для высокоскоростной нарезки и склейки видеолекций с использованием FFmpeg. Проект сфокусирован на максимальной отзывчивости интерфейса (Fast UX) и сохранении качества исходного материала.

## Ключевые особенности

*   **Мгновенный предпросмотр:** Вы можете перемещаться по таймлайну финального (еще не созданного) видео без задержек. Генерация фрагментов происходит "на лету".
*   **Smart Cut (Умная склейка):** Финальный рендеринг не перекодирует основное тело видео. Пересчитываются (рендерятся) только моменты стыков, переходов и наложения эффектов (fade-in/fade-out). Остальное копируется (`copy`), что обеспечивает максимальную скорость и качество.
*   **Веб-интерфейс:** Полностью автономный GUI в браузере, работающий через WebSocket.
*   **Встроенный файловый менеджер:** Выбор файлов и папок происходит прямо в веб-интерфейсе (без системных диалогов OS), что позволяет запускать сервер на удаленной машине.
*   **Оптимизация под Linux:** Поддержка работы через RAM-диск (`/dev/shm`) для молниеносной генерации превью.

## Требования

1.  **Python 3.8+**
2.  **FFmpeg:** Должен быть установлен и доступен в `PATH` системы.
3.  **Python-библиотеки:**
    ```bash
    pip install websockets
    ```
    *(Библиотека `tkinter` больше не требуется).*

## Установка и Запуск

1.  Склонируйте репозиторий или скачайте файлы проекта.
2.  Убедитесь, что у вас есть файлы интро (например, `intro_new_sponsored_2k.mkv`) в домашней директории или папке документов (пути настраиваются в скрипте).
3.  Запустите сервер:
    ```bash
    python gui.py
    ```
4.  Браузер откроется автоматически по адресу `http://127.0.0.1:8765`.

## Как это работает?

### 1. Предпросмотр (Fast UX)
В отличие от обычных редакторов, здесь не нужно ждать пре-рендера.
*   Когда вы двигаете ползунок, фронтенд отправляет запрос на сервер.
*   Сервер с помощью FFmpeg вырезает 10-секундный кусок из нужного места исходника, накладывает эффекты, понижает разрешение до 480p (для скорости) и отправляет обратно.
*   **Fast Seek:** Перемотка происходит мгновенно благодаря использованию Input Seeking (`-ss` перед `-i`).

### 2. Финальный Рендеринг
Используется гибридный подход:
1.  Скрипт находит ключевые кадры (keyframes) рядом с точками обрезки.
2.  Генерируются короткие "заплатки" (fade-in и fade-out переходы).
3.  Создается файл списка (`concat.txt`), где смешиваются "заплатки" и прямые копии потоков из исходного файла.
4.  Финальная сборка происходит через `concat demuxer`, что позволяет избежать перекодирования 99% видео.

## Структура интерфейса

1.  **Настройки:** Выбор режима (один/два файла), разрешения интро и использования RAM.
2.  **Файлы:** Выбор исходников. Теперь используется встроенный в браузер навигатор по файловой системе сервера.
3.  **Таймкоды:** Указание границ обрезки. Кнопка `▶` позволяет мгновенно проверить точку начала/конца в плеере.
4.  **Предпросмотр:** Виртуальный плеер, показывающий результат склейки.

## Конфигурация

В начале файла `gui.py` можно настроить пути:
*   `BROWSE_ROOT_INPUTS`: Стартовая папка для выбора видео.
*   `BROWSE_ROOT_OUTPUT`: Папка для сохранения результата.
*   `DEFAULT_INTRO_DIR`: Путь к файлам заставок.